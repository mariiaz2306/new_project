{"ast":null,"code":"// const INIT_STATE = {\n//     carts: []\n// }\n// export const cartReducer = (state = INIT_STATE, action) => {\n//     switch (action.type) {\n//         case \"ADD_TO_CART\":\n//             return {\n//                 ...state, carts: [...state.carts, action.payload]\n//             }\n//     case \"REMOVE_TO_CART\":\n//         const data=state.carts.filter((item)=>item.isbn !== action.payload)\n//         console.log(data);\n//         return{\n//             ...state,\n//             carts:data\n//         }\n\nimport { ADD_TO_CART, REMOVE_FROM_CART, UPDATE_CART_QUANTITY } from \"../actions/action\";\n\n//         default:\n//             return state;\n//     }\n// }\n\nconst INITIAL_STATE = {\n  carts: {} // Объект для хранения корзин пользователей\n};\n\nexport const cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_STATE;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const {\n    userId,\n    isbn,\n    quantity\n  } = action.payload;\n  switch (action.type) {\n    case ADD_TO_CART:\n      const existingCart = state.carts[userId] || [];\n      const updatedCartAdd = [...existingCart, {\n        isbn,\n        quantity: 1\n      } // Начальное количество при добавлении\n      ];\n\n      return {\n        ...state,\n        carts: {\n          ...state.carts,\n          [userId]: updatedCartAdd\n        }\n      };\n    case REMOVE_FROM_CART:\n      const updatedCartRemove = state.carts[userId].filter(item => item.bookId !== isbn);\n      return {\n        ...state,\n        carts: {\n          ...state.carts,\n          [userId]: updatedCartRemove\n        }\n      };\n    case UPDATE_CART_QUANTITY:\n      const updatedItems = state.carts[userId].map(item => item.bookId === isbn ? {\n        ...item,\n        quantity\n      } : item);\n      return {\n        ...state,\n        carts: {\n          ...state.carts,\n          [userId]: updatedItems\n        }\n      };\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ADD_TO_CART","REMOVE_FROM_CART","UPDATE_CART_QUANTITY","INITIAL_STATE","carts","cartReducer","state","action","userId","isbn","quantity","payload","type","existingCart","updatedCartAdd","updatedCartRemove","filter","item","bookId","updatedItems","map"],"sources":["C:/Users/Mariiia/Desktop/react-ecomm-main/src/redux/reducer/cartReducer.js"],"sourcesContent":["// const INIT_STATE = {\n//     carts: []\n// }\n// export const cartReducer = (state = INIT_STATE, action) => {\n//     switch (action.type) {\n//         case \"ADD_TO_CART\":\n//             return {\n//                 ...state, carts: [...state.carts, action.payload]\n//             }\n//     case \"REMOVE_TO_CART\":\n//         const data=state.carts.filter((item)=>item.isbn !== action.payload)\n//         console.log(data);\n//         return{\n//             ...state,\n//             carts:data\n//         }\n\nimport { ADD_TO_CART, REMOVE_FROM_CART, UPDATE_CART_QUANTITY } from \"../actions/action\";\n\n    \n//         default:\n//             return state;\n//     }\n// }\n\n\nconst INITIAL_STATE = {\n    carts: {}, // Объект для хранения корзин пользователей\n  };\n  \n\n  export const cartReducer = (state = INITIAL_STATE, action) => {\n    const { userId, isbn, quantity } = action.payload;\n  \n    switch (action.type) {\n      case ADD_TO_CART:\n        const existingCart = state.carts[userId] || [];\n        const updatedCartAdd = [\n          ...existingCart,\n          { isbn, quantity: 1 }, // Начальное количество при добавлении\n        ];\n        return {\n          ...state,\n          carts: {\n            ...state.carts,\n            [userId]: updatedCartAdd,\n          },\n        };\n  \n      case REMOVE_FROM_CART:\n        const updatedCartRemove = state.carts[userId].filter(\n          (item) => item.bookId !== isbn\n        );\n        return {\n          ...state,\n          carts: {\n            ...state.carts,\n            [userId]: updatedCartRemove,\n          },\n        };\n  \n      case UPDATE_CART_QUANTITY:\n        const updatedItems = state.carts[userId].map((item) =>\n          item.bookId === isbn ? { ...item, quantity } : item\n        );\n        return {\n          ...state,\n          carts: {\n            ...state.carts,\n            [userId]: updatedItems,\n          },\n        };\n  \n      default:\n        return state;\n    }\n  };\n  \n\n\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,WAAW,EAAEC,gBAAgB,EAAEC,oBAAoB,QAAQ,mBAAmB;;AAGvF;AACA;AACA;AACA;;AAGA,MAAMC,aAAa,GAAG;EAClBC,KAAK,EAAE,CAAC,CAAC,CAAE;AACb,CAAC;;AAGD,OAAO,MAAMC,WAAW,GAAG,YAAmC;EAAA,IAAlCC,KAAK,uEAAGH,aAAa;EAAA,IAAEI,MAAM;EACvD,MAAM;IAAEC,MAAM;IAAEC,IAAI;IAAEC;EAAS,CAAC,GAAGH,MAAM,CAACI,OAAO;EAEjD,QAAQJ,MAAM,CAACK,IAAI;IACjB,KAAKZ,WAAW;MACd,MAAMa,YAAY,GAAGP,KAAK,CAACF,KAAK,CAACI,MAAM,CAAC,IAAI,EAAE;MAC9C,MAAMM,cAAc,GAAG,CACrB,GAAGD,YAAY,EACf;QAAEJ,IAAI;QAAEC,QAAQ,EAAE;MAAE,CAAC,CAAE;MAAA,CACxB;;MACD,OAAO;QACL,GAAGJ,KAAK;QACRF,KAAK,EAAE;UACL,GAAGE,KAAK,CAACF,KAAK;UACd,CAACI,MAAM,GAAGM;QACZ;MACF,CAAC;IAEH,KAAKb,gBAAgB;MACnB,MAAMc,iBAAiB,GAAGT,KAAK,CAACF,KAAK,CAACI,MAAM,CAAC,CAACQ,MAAM,CACjDC,IAAI,IAAKA,IAAI,CAACC,MAAM,KAAKT,IAAI,CAC/B;MACD,OAAO;QACL,GAAGH,KAAK;QACRF,KAAK,EAAE;UACL,GAAGE,KAAK,CAACF,KAAK;UACd,CAACI,MAAM,GAAGO;QACZ;MACF,CAAC;IAEH,KAAKb,oBAAoB;MACvB,MAAMiB,YAAY,GAAGb,KAAK,CAACF,KAAK,CAACI,MAAM,CAAC,CAACY,GAAG,CAAEH,IAAI,IAChDA,IAAI,CAACC,MAAM,KAAKT,IAAI,GAAG;QAAE,GAAGQ,IAAI;QAAEP;MAAS,CAAC,GAAGO,IAAI,CACpD;MACD,OAAO;QACL,GAAGX,KAAK;QACRF,KAAK,EAAE;UACL,GAAGE,KAAK,CAACF,KAAK;UACd,CAACI,MAAM,GAAGW;QACZ;MACF,CAAC;IAEH;MACE,OAAOb,KAAK;EAAC;AAEnB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}